<!DOCTYPE html>
    <html lang="fr">

    <head>
        <meta charset="UTF-8">
        <title>A&L - Agence de voyage</title>
        <link rel="stylesheet" href="css/style.css">
        <script type="text/javascript" src="js/se_connecter.js"></script>
    </head>

    <body>
        <header>
            <h1>A&L - Agence de voyage</h1>
            <nav>
                    <ul>
                        <li><a href="index.html">Les destinations</a></li>
                        <li><a href="reservation.html">Réservation</a></li>
                        <li><a href="contact.html">A propos & Contact</a></li>
                        <li><button id="connexion">Se connecter</button></li>
                        <li id="is_connect">Vous n'êtes pas authentifié</li>
                        <li><a href="panier.html" id="cart">Mon panier</a></li>
                    </ul>
            </nav>
            <h2>Mon panier</h2>
        </header>
        <table>
            <thead>
            <th>Destination</th>
            <th>Prix</th>
            <th>Dates</th>
            </thead>
            <tbody></tbody>
        </table>

            <footer>
                    <h3>TLI - Lucas CLEMENTEI & Alexandre GUILLON</h3>
                    <h3>Contact : <a href="mailto:alexandre.guillon@cpe.fr">
                                    alexandre.guillon@cpe.fr</a> / 
                                    <a href="mailto:lucas.clementei@cpe.fr">
                                            lucas.clementei@cpe.fr</a>
                    </h3>
                    <br />
            </footer> 
    </body>
    <script>
    document.getElementById("connexion").onclick = function () {
    location.href = "connexion.html";
    };
    document.addEventListener("DOMContentLoaded", function(event) {
    if(sessionStorage.getItem('identifiant') !== null)
    {
        document.getElementById("is_connect").innerText = "Bonjour "+sessionStorage.getItem('nom');
    }

    function addRow(destination,price, dateDeb, dateFin)
    {
         if (!document.getElementsByTagName) return;
         tabBody=document.getElementsByTagName("tbody").item(0);
         row=document.createElement("tr");
         cell1 = document.createElement("td");
         cell2 = document.createElement("td");
         cell3 = document.createElement("td");
         textnode1=document.createTextNode(destination);
         textnode2=document.createTextNode(price + " €");
         textnode3 = document.createTextNode(dateDeb+ " - "+ dateFin);
         cell1.appendChild(textnode1);
         cell2.appendChild(textnode2);
         cell3.appendChild(textnode3);
         row.appendChild(cell1);
         row.appendChild(cell2);
         row.appendChild(cell3);
         tabBody.appendChild(row);
    }

    var storedTrips = JSON.parse(sessionStorage.getItem("cartArray"));
    storedTrips.forEach(element => {
        addRow(element.trip, element.price, element.begin, element.last);
    });
 
});
    
    </script>
    </html>